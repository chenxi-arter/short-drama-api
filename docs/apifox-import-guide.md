# Apifox 导入指南

## 概述

本文档提供了将短剧API接口文档导入Apifox进行测试的完整指南。我们已经为您准备了符合OpenAPI 3.0规范的接口文档，可以直接导入Apifox使用。

## 文件说明

- **文件名**: `apifox-openapi.json`
- **格式**: OpenAPI 3.0.3 规范
- **包含内容**: 所有API接口的完整定义，包括请求参数、响应格式、认证方式等

## 导入步骤

### 1. 打开Apifox

启动Apifox应用程序，登录您的账户。

### 2. 创建新项目或选择现有项目

- 如果是新项目：点击「新建项目」
- 如果是现有项目：选择要导入接口的项目

### 3. 导入接口文档

1. 在项目中，点击「导入」按钮
2. 选择「OpenAPI/Swagger」格式
3. 选择「从文件导入」
4. 上传 `apifox-openapi.json` 文件
5. 点击「开始导入」

### 4. 配置环境变量

导入完成后，建议配置以下环境变量：

#### 开发环境
```
baseUrl: http://localhost:3000
```

#### 生产环境
```
baseUrl: https://api.example.com
```

### 5. 配置认证信息

大部分接口需要Bearer Token认证：

1. 在项目设置中找到「认证」选项
2. 选择「Bearer Token」类型
3. 在环境变量中添加：
   ```
   accessToken: your_access_token_here
   ```

## 接口分类

导入后，接口将按以下分类组织：

- **认证** - 用户登录、令牌刷新等
- **用户** - 用户信息管理
- **首页** - 首页内容获取
- **列表** - 视频列表和筛选
- **视频** - 视频播放和管理
- **公共视频** - 公共视频内容
- **测试** - 健康检查等

## 测试建议

### 1. 认证流程测试

建议按以下顺序测试认证相关接口：

1. `POST /user/telegram-login` - 获取访问令牌
2. `GET /user/me` - 验证令牌有效性
3. `POST /auth/refresh` - 测试令牌刷新

### 2. 业务流程测试

完成认证后，可以测试业务流程：

1. `GET /api/home/getvideos` - 获取首页内容
2. `GET /api/video/details` - 获取视频详情
3. `POST /api/video/progress` - 保存观看进度

### 3. 批量测试

利用Apifox的批量测试功能：

1. 创建测试场景
2. 设置前置脚本获取认证令牌
3. 批量执行所有接口测试

## 注意事项

1. **认证令牌**: 大部分接口需要有效的Bearer Token
2. **参数格式**: 请严格按照文档中的参数格式传递数据
3. **错误处理**: 注意查看错误响应的格式和状态码
4. **环境切换**: 开发和生产环境的baseUrl不同，注意切换

## 常见问题

### Q: 导入后接口显示不完整？
A: 请确保使用的是最新版本的 `apifox-openapi.json` 文件，并检查Apifox版本是否支持OpenAPI 3.0.3。

### Q: 认证失败怎么办？
A: 请检查Bearer Token是否正确设置，确保令牌未过期。

### Q: 某些接口测试失败？
A: 请检查服务器是否正常运行，以及网络连接是否正常。

## 更新说明

当API接口有更新时：

1. 获取最新的 `apifox-openapi.json` 文件
2. 在Apifox中选择「同步」或「重新导入」
3. 选择「覆盖」模式更新接口定义

## 技术支持

如果在导入或测试过程中遇到问题，请联系技术支持团队。

---

**文档版本**: v1.0.1  
**更新时间**: 2024年  
**适用于**: Apifox v2.0+